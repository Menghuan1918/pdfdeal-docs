import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as r,c as p,b as i,d as e,e as l,f as k,r as a,a as n}from"./app-xKkG33rb.js";const o={},u={class:"hint-container info"},g={id:"beta功能说明",tabindex:"-1"},c={class:"header-anchor",href:"#beta功能说明"},A={id:"启用full-speed模式",tabindex:"-1"},y={class:"header-anchor",href:"#启用full-speed模式"};function m(b,s){const h=a("RouteLink"),t=a("Badge");return r(),p("div",null,[s[16]||(s[16]=i("h2",{id:"获得-api-密匙",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#获得-api-密匙"},[i("span",null,"获得 API 密匙")])],-1)),s[17]||(s[17]=i("p",null,[e("请登录"),i("a",{href:"https://open.noedgeai.com",target:"_blank",rel:"noopener noreferrer"},"Doc2X 开放平台"),e("获取 API 密匙。")],-1)),i("div",u,[s[2]||(s[2]=i("p",{class:"hint-container-title"},"相关信息",-1)),i("p",null,[s[1]||(s[1]=e("如您想要完全自己掌控处理PDF文件的过程(例如集成在您的GUI软件中)，您可以参见")),l(h,{to:"/zh/guide/async.html"},{default:k(()=>s[0]||(s[0]=[e("异步实现")])),_:1})])]),s[18]||(s[18]=i("h2",{id:"描述",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#描述"},[i("span",null,"描述")])],-1)),s[19]||(s[19]=i("p",null,[i("code",null,"Doc2X"),e(" 类的初始化方法用于创建一个 Doc2X 客户端实例。该实例用于处理 PDF 文件的转换操作。")],-1)),s[20]||(s[20]=i("h4",{id:"参数",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#参数"},[i("span",null,"参数")])],-1)),i("table",null,[s[13]||(s[13]=i("thead",null,[i("tr",null,[i("th",null,"参数名"),i("th",null,"类型"),i("th",null,"默认值"),i("th",null,"描述")])],-1)),i("tbody",null,[s[7]||(s[7]=i("tr",null,[i("td",null,[i("code",null,"apikey")]),i("td",null,"str"),i("td",null,"None"),i("td",null,[e("Doc2X 的 API 密钥。如果未提供，将尝试从环境变量 "),i("code",null,"DOC2X_APIKEY"),e(" 中获取。")])],-1)),s[8]||(s[8]=i("tr",null,[i("td",null,[i("code",null,"thread")]),i("td",null,"int"),i("td",null,"5"),i("td",null,"最大并发线程数。除非您确信您需要修改，请使用默认值。")],-1)),s[9]||(s[9]=i("tr",null,[i("td",null,[i("code",null,"max_pages")]),i("td",null,"int"),i("td",null,"1000"),i("td",null,"处理的最大页数。除非您确信您需要修改，请使用默认值。")],-1)),s[10]||(s[10]=i("tr",null,[i("td",null,[i("code",null,"retry_time")]),i("td",null,"int"),i("td",null,"5"),i("td",null,"最高重试次数。除非您确信您需要修改，请使用默认值。")],-1)),s[11]||(s[11]=i("tr",null,[i("td",null,[i("code",null,"max_time")]),i("td",null,"int"),i("td",null,"90"),i("td",null,"等待响应的最大时间（以秒为单位）。如您网速过慢可适当调高此值。")],-1)),s[12]||(s[12]=i("tr",null,[i("td",null,[i("code",null,"debug")]),i("td",null,"bool"),i("td",null,"False"),i("td",null,"是否启用调试日志记录。")],-1)),i("tr",null,[i("td",null,[s[3]||(s[3]=i("code",null,"full_speed",-1)),l(t,{text:"需要0.4.6+版本",type:"warning"})]),s[4]||(s[4]=i("td",null,"bool",-1)),s[5]||(s[5]=i("td",null,"False",-1)),s[6]||(s[6]=i("td",null,[i("strong",null,"beta功能"),e("，其会自动嗅探并发上限，试探当前可用的最高并发上限，由于该功能可能会导致频繁触发访问上限导致请求停滞缓慢, 请谨慎使用。")],-1))])])]),i("h4",g,[i("a",c,[i("span",null,[s[14]||(s[14]=e("Beta功能说明")),l(t,{text:"需要0.4.6+版本",type:"warning"})])])]),s[21]||(s[21]=n(`<p><strong>full_speed</strong>：当设置为<code>True</code>时，该功能会自动检测并维持在当前可用的最高并发上限。它会根据服务器的响应动态调整并发数量，但不会低于<code>thread</code>参数指定的值。启用<code>full_speed</code>后，由于其通过触发服务器速率限制警告来进行嗅探，因此会忽略<code>retry_time</code>和<code>max_time</code>的设置，强制将其分别设为<code>10</code>和<code>180</code>。</p><h4 id="异常" tabindex="-1"><a class="header-anchor" href="#异常"><span>异常</span></a></h4><table><thead><tr><th>异常类型</th><th>描述</th></tr></thead><tbody><tr><td><code>ValueError</code></td><td>如果未找到 API 密钥，将引发此异常。</td></tr></tbody></table><h2 id="使用环境变量导入密匙-推荐" tabindex="-1"><a class="header-anchor" href="#使用环境变量导入密匙-推荐"><span>使用环境变量导入密匙(推荐)</span></a></h2><p>运行以下代码以导入您的 API 密匙，此时程序将会从环境变量中寻找<code>DOC2X_APIKEY</code>：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pdfdeal </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Doc2X</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Doc2X</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="macos-linux" tabindex="-1"><a class="header-anchor" href="#macos-linux"><span>MacOS/Linux</span></a></h3><p>请使用以下命令为当前终端设置环境变量：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> DOC2X_APIKEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Your API Key&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>您也可以将以上命令添加到<code>~/.zshrc</code>或<code>~/.bashrc</code>以持久化环境变量。</p><h3 id="windows" tabindex="-1"><a class="header-anchor" href="#windows"><span>Windows</span></a></h3><p>请使用以下命令为当前终端设置环境变量：</p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" data-title="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">set </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;DOC2X_APIKEY&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Your API Key&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>您可以使用命令<code>setx &quot;DOC2X_APIKEY&quot; &quot;Your API Key&quot;</code>中以持久化保存变量(而不是当前终端会话)。</p><h2 id="为项目单独设置-api-密匙" tabindex="-1"><a class="header-anchor" href="#为项目单独设置-api-密匙"><span>为项目单独设置 API 密匙</span></a></h2><p>若您希望 API 密钥仅对单个项目可见，可创建一个包含您的 API 密钥的本地<code>.env</code>文件。以下是一个<code>.env</code>文件的示范：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>DOC2X_APIKEY = &quot;Your API Key&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>导入的代码与使用环境变量的方法相同。</p><blockquote><p>注意：这可能需要您使用集成开发环境，例如 VSCode</p></blockquote><h2 id="指定-api-密匙-不推荐" tabindex="-1"><a class="header-anchor" href="#指定-api-密匙-不推荐"><span>指定 API 密匙(不推荐)</span></a></h2><p>如果您想指定您的 API 密匙，您可以通过以下代码导入：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pdfdeal </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Doc2X</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Doc2X</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">apikey</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Your API key&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="代码示范" tabindex="-1"><a class="header-anchor" href="#代码示范"><span>代码示范</span></a></h2><h3 id="修改同时请求限制" tabindex="-1"><a class="header-anchor" href="#修改同时请求限制"><span>修改同时请求限制</span></a></h3><div class="hint-container caution"><p class="hint-container-title">警告</p><p>除非您确信您需要修改请求频率，请不要修改同时请求限制，请使用默认的设置。</p></div><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pdfdeal </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Doc2X</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Doc2X</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">max_pages</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">thread</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改日志显示等级" tabindex="-1"><a class="header-anchor" href="#修改日志显示等级"><span>修改日志显示等级</span></a></h3><p>默认情况下，程序将仅会显示出错信息，中间过程(例如处理进度)等信息将仅会以<code>logging.INFO</code>等级输出。您可以在初始化时传入参数<code>debug=true</code>以显示所有日志。</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pdfdeal </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Doc2X</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Doc2X</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">debug</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,29)),i("h3",A,[i("a",y,[i("span",null,[s[15]||(s[15]=e("启用full_speed模式")),l(t,{text:"需要0.2.4+版本",type:"warning"})])])]),s[22]||(s[22]=n(`<div class="hint-container warning"><p class="hint-container-title">注意</p><p>此功能仍处于beta状态，请谨慎使用。</p></div><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pdfdeal </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Doc2X</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Doc2X</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">debug</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">thread</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">full_speed</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2))])}const f=d(o,[["render",m],["__file","Init.html.vue"]]),F=JSON.parse('{"path":"/zh/guide/Init.html","title":"初始化实例","lang":"zh-CN","frontmatter":{"title":"初始化实例","icon":"key","order":1,"description":"获得 API 密匙 请登录Doc2X 开放平台获取 API 密匙。 相关信息 如您想要完全自己掌控处理PDF文件的过程(例如集成在您的GUI软件中)，您可以参见 描述 Doc2X 类的初始化方法用于创建一个 Doc2X 客户端实例。该实例用于处理 PDF 文件的转换操作。 参数 Beta功能说明 full_speed：当设置为True时，该功能会自动检...","head":[["meta",{"property":"og:url","content":"https://menghuan1918.github.io/pdfdeal-docs/pdfdeal-docs/zh/guide/Init.html"}],["meta",{"property":"og:site_name","content":"pdfdeal"}],["meta",{"property":"og:title","content":"初始化实例"}],["meta",{"property":"og:description","content":"获得 API 密匙 请登录Doc2X 开放平台获取 API 密匙。 相关信息 如您想要完全自己掌控处理PDF文件的过程(例如集成在您的GUI软件中)，您可以参见 描述 Doc2X 类的初始化方法用于创建一个 Doc2X 客户端实例。该实例用于处理 PDF 文件的转换操作。 参数 Beta功能说明 full_speed：当设置为True时，该功能会自动检..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-26T07:23:22.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-26T07:23:22.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"初始化实例\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-26T07:23:22.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Menghuan1918\\",\\"url\\":\\"https://github.com/Menghuan1918\\"}]}"]]},"headers":[{"level":2,"title":"获得 API 密匙","slug":"获得-api-密匙","link":"#获得-api-密匙","children":[]},{"level":2,"title":"描述","slug":"描述","link":"#描述","children":[]},{"level":2,"title":"使用环境变量导入密匙(推荐)","slug":"使用环境变量导入密匙-推荐","link":"#使用环境变量导入密匙-推荐","children":[{"level":3,"title":"MacOS/Linux","slug":"macos-linux","link":"#macos-linux","children":[]},{"level":3,"title":"Windows","slug":"windows","link":"#windows","children":[]}]},{"level":2,"title":"为项目单独设置 API 密匙","slug":"为项目单独设置-api-密匙","link":"#为项目单独设置-api-密匙","children":[]},{"level":2,"title":"指定 API 密匙(不推荐)","slug":"指定-api-密匙-不推荐","link":"#指定-api-密匙-不推荐","children":[]},{"level":2,"title":"代码示范","slug":"代码示范","link":"#代码示范","children":[{"level":3,"title":"修改同时请求限制","slug":"修改同时请求限制","link":"#修改同时请求限制","children":[]},{"level":3,"title":"修改日志显示等级","slug":"修改日志显示等级","link":"#修改日志显示等级","children":[]},{"level":3,"title":"启用full_speed模式","slug":"启用full-speed模式","link":"#启用full-speed模式","children":[]}]}],"git":{"createdTime":1720615458000,"updatedTime":1732605802000,"contributors":[{"name":"Menghuan1918","email":"Menghuan2003@outlook.com","commits":2},{"name":"Menghuan1918","email":"menghuan2003@outlook.com","commits":2}]},"readingTime":{"minutes":3.14,"words":941},"filePathRelative":"zh/guide/Init.md","localizedDate":"2024年7月10日","autoDesc":true}');export{f as comp,F as data};
