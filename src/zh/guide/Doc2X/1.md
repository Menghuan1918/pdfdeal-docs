---
title: 处理图片
icon: images
---

## 图片处理

`Client.pic2file`

接收一个或以多个(列表)的图片路径，返回处理后的输出文件路径。

输入参数：
- `image_file`：图片文件路径或图片文件路径列表
- `output_path`：`str`，可选，输出文件夹路径，默认为`"./Output"`
- `output_names` : `list`，可选，输出文件名列表，长度必须与`image_file`相同，用于指定输出文件的名称
- `output_format`：`str`，可选，输出格式，接受`texts`、`md`、`md_dollar`、`latex`，默认为`md_dollar`。其中选择`texts`时直接返回文本，并不会保存到文件
- `img_correction`：`bool`，可选，是否进行图片矫正，默认为`True`
- `equation`：`bool`，可选，使用纯公式输出模式，默认为`False`
- `convert`：`bool`，可选，是否将`[`转换为`$`，`[[`转换为`$$`，默认为`False`，仅在`output_format`为`texts`时有效
- `version`：`str`，可选，返回格式，接受`v1`、`v2`，当为`v2`时会返回更多信息，默认为`v1`

#### 示例：按照rpm限制处理多个图片，以`v2`格式返回

```python
from pdfdeal.doc2x import Doc2X
client = Doc2X()
file_list = ["tests/image/sample_bad.png", "tests/image/sample.png"]
# 如果你不需要使用重命名功能，可以使用 from pdfdeal.file_tools import gen_folder_list 函数从文件夹生成文件列表(因为其排序不是固定的)
# 例如：
# file_list = gen_folder_list("./tests/image","img")
success, failed, flag = client.pdf2file(
    pdf_file=file_list,
    output_path="./Output/test/multiple/pdf2file",
    output_names=["sample1.docx", "sample2.docx"],
    output_format="docx",
    version="v2",
)
print(success)
print(failed)
print(flag)
```

当第一个文件处理失败，第二个文件处理成功时，其示例输出：

```python
['', './Output/test/multiple/pdf2file/sample2.docx']
[{'error': 'Error Upload file error! 500:{"code":"service unavailable","msg":"read file error"}', 'path': 'tests/pdf/sample_bad.pdf'}, {'error': '', 'path': ''}]
True
```

#### 示例：处理单个图片，在纯公式模式下，获得公式格式为`$公式$`形式的内容

```python
from pdfdeal.doc2x import Doc2X
client = Doc2X()
text = client.pic2file(
    "tests/image/sample.png", output_format="texts", equation=True, convert=True
)
print(text)
```

示例输出：
```python
[['$$\\text{Test}$$']]
```